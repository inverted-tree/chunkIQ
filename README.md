<div align="center">
    <h1>chunkIQ</h1>
    <p>Analyze file system data for internal and temporal redundancy.</p>
</div>

<div align="center">
    <a href="https://github.com/inverted-tree/chunkIQ/actions/workflows/test.yml">
        <img src="https://github.com/inverted-tree/chunkIQ/actions/workflows/test.yml/badge.svg" alt="CI Status" style="padding: 16px;">
    </a>
    <a href="https://codecov.io/gh/inverted-tree/chunkIQ">
      <img src="https://codecov.io/gh/inverted-tree/chunkIQ/branch/main/graph/badge.svg" alt="Code Coverage" style="padding: 16px;"/>
    </a>
</div>

# Installation
## Requirements
This program is written is pure Rust, so only a Rust toolchain is necessary to build chunkIQ from source. If you do not have Rust installed, check out [the official getting started guide](https://www.rust-lang.org/learn/get-started). As of now this project is not packaged for any package manager, but I might consider this when it becomes feature complete.

# Modus Operandi
This program works in two modes, [trace](#file-system-tracing) and [parse](#log-file-parsing).

It splits the provided files into chunks of a specified size and calculates a digest for each chunk that serves as a unique identifier for the data in this chunk. It then compares every new digest with a database of existing chunks to find duplicates.

## File System Tracing
This mode splits the file system data into chunks and compares them to find spacially redundant data.

To run chunkIQ in this mode, use
```sh
cargo run trace [OPTIONS] <filenames>
```

> [!IMPORTANT]
> Not all the options listed under `cargo run trace --help` are implemented yet.

## Log File Parsing
This mode uses the trace files generated by the [trace mode](#file-system-tracing) to find redundancy between the analzed datasets. This mode can be used to find spacial and temporal redundancies.

To run chunkIQ in this mode, use
```sh
cargo run parse [OPTIONS] <trace-filenames>
```

To automate duplicate discovery you may register the trace mode as a Cronjob on your system.

> [!WARNING]
> This mode is not yet implemented.

# Contributing
If you want to contribute to this project, take a look at the TODOs which I've left inside the source files. You can list them all with
```sh
grep -rn --include "*.rs" "TODO:" . | awk '{$1=$1};1'
```

Feel free to make a PR for any of these enhancements. For anything else please open a feature request first, so we can discuss if your idea makes sense in the context of this project.

> [!NOTE]
> The following standards are a requirement to getting your contributions merged:
> - All submitted code must be properly formatted with the rustfmt defaults.
> - All submitted code must include a reasonable amount of unit tests inside the source file (sometimes less is more but nothing is still nothing).

---

> [!NOTE]
> This project is based on [a Scala 2 implementation](https://github.com/dmeister/fs-c/tree/master) which is no longer maintained and relies on deprecated dependencies. This Rust implementation aims to offer improved usability and performance and avoids the deprecated dependencies issue.

